CREATE OR REPLACE PROCEDURE "SYSTEM"."RETRIEVE_CUST_SER_DET_PRC"
(
P_IN_CLIENT_ID IN PARTIES.ID %TYPE,
P_IN_WORK_ITEM_ID IN PARTIES.ID %TYPE,
P_OUT_SER_CUR OUT SYS_REFCURSOR,
P_OUT_ERROR_CODE OUT NUMBER,
P_OUT_ERROR_MESSAGE OUT VARCHAR
)

AS
L_ERROR_CODE NUMBER:=0;
L_ERROR_MESSAGE VARCHAR(500):='SUCCESSFULLY FETCHED';


BEGIN
P_OUT_ERROR_CODE:=L_ERROR_CODE;
P_OUT_ERROR_MESSAGE:=L_ERROR_MESSAGE;

IF P_IN_CLIENT_ID IS NOT NULL THEN
OPEN P_OUT_SER_CUR FOR SELECT PAR.USER_NAME,PAR.FIRST_NAME,PAR.LAST_NAME FROM PARTIES PAR
WHERE PAR.ID=P_IN_CLIENT_ID;
ELSE
OPEN P_OUT_SER_CUR FOR  SELECT 'INVALIDINPUT' FROM DUAL;
P_OUT_ERROR_CODE:=-2001;
P_OUT_ERROR_MESSAGE:='ERROR OCCURRED';

END IF;
END RETRIEVE_CUST_SER_DET_PRC;

